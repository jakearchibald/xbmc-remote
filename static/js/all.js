!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,a,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,u=new Array(i-1),a=1;i>a;a++)u[a-1]=arguments[a];n.apply(this,u)}else if(o(n)){for(i=arguments.length,u=new Array(i-1),a=1;i>a;a++)u[a-1]=arguments[a];for(c=n.slice(),i=c.length,a=0;i>a;a++)c[a].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t){var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){"use strict";function r(e,t){m.async(e,t)}function i(){m.on.apply(m,arguments)}function o(){m.off.apply(m,arguments)}var s=e("./rsvp/promise")["default"],u=e("./rsvp/events")["default"],a=e("./rsvp/node")["default"],c=e("./rsvp/all")["default"],l=e("./rsvp/all-settled")["default"],f=e("./rsvp/race")["default"],h=e("./rsvp/hash")["default"],v=e("./rsvp/hash-settled")["default"],p=e("./rsvp/rethrow")["default"],d=e("./rsvp/defer")["default"],m=e("./rsvp/config").config,_=e("./rsvp/config").configure,g=e("./rsvp/map")["default"],y=e("./rsvp/resolve")["default"],w=e("./rsvp/reject")["default"],b=e("./rsvp/filter")["default"],E=e("./rsvp/asap")["default"];if(m.async=E,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var S=window.__PROMISE_INSTRUMENTATION__;_("instrument",!0);for(var k in S)S.hasOwnProperty(k)&&i(k,S[k])}n.Promise=s,n.EventTarget=u,n.all=c,n.allSettled=l,n.race=f,n.hash=h,n.hashSettled=v,n.rethrow=p,n.defer=d,n.denodeify=a,n.configure=_,n.on=i,n.off=o,n.resolve=y,n.reject=w,n.async=r,n.map=g,n.filter=b},{"./rsvp/all":5,"./rsvp/all-settled":4,"./rsvp/asap":6,"./rsvp/config":7,"./rsvp/defer":8,"./rsvp/events":9,"./rsvp/filter":10,"./rsvp/hash":12,"./rsvp/hash-settled":11,"./rsvp/map":14,"./rsvp/node":15,"./rsvp/promise":16,"./rsvp/race":22,"./rsvp/reject":23,"./rsvp/resolve":24,"./rsvp/rethrow":25}],4:[function(e,t,n){"use strict";function r(e){return{state:"fulfilled",value:e}}function i(e){return{state:"rejected",reason:e}}var o=e("./promise")["default"],s=e("./utils").isArray,u=e("./utils").isNonThenable;n["default"]=function(e,t){return new o(function(t){function n(e){return function(t){c(e,r(t))}}function a(e){return function(t){c(e,i(t))}}function c(e,n){h[e]=n,0===--f&&t(h)}if(!s(e))throw new TypeError("You must pass an array to allSettled.");var l,f=e.length;if(0===f)return void t([]);for(var h=new Array(f),v=0;v<e.length;v++)l=e[v],u(l)?c(v,r(l)):o.resolve(l).then(n(v),a(v))},t)}},{"./promise":16,"./utils":26}],5:[function(e,t,n){"use strict";var r=e("./promise")["default"];n["default"]=function(e,t){return r.all(e,t)}},{"./promise":16}],6:[function(e,t,n){(function(e){"use strict";function t(){return function(){e.nextTick(o)}}function r(){var e=0,t=new a(o),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function i(){return function(){setTimeout(o,1)}}function o(){for(var e=0;e<c.length;e++){var t=c[e],n=t[0],r=t[1];n(r)}c.length=0}n["default"]=function(e,t){var n=c.push([e,t]);1===n&&s()};var s,u="undefined"!=typeof window?window:{},a=u.MutationObserver||u.WebKitMutationObserver,c=[];s="undefined"!=typeof e&&"[object process]"==={}.toString.call(e)?t():a?r():i()}).call(this,e("/Users/jakearchibald/dev/xbmc-remote/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/jakearchibald/dev/xbmc-remote/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":2}],7:[function(e,t,n){"use strict";function r(e,t){return"onerror"===e?void o.on("error",t):2!==arguments.length?o[e]:void(o[e]=t)}var i=e("./events")["default"],o={instrument:!1};i.mixin(o),n.config=o,n.configure=r},{"./events":9}],8:[function(e,t,n){"use strict";var r=e("./promise")["default"];n["default"]=function(e){var t={};return t.promise=new r(function(e,n){t.resolve=e,t.reject=n},e),t}},{"./promise":16}],9:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function i(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}n["default"]={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,t){var n,o=i(this);n=o[e],n||(n=o[e]=[]),-1===r(n,t)&&n.push(t)},off:function(e,t){var n,o,s=i(this);return t?(n=s[e],o=r(n,t),void(-1!==o&&n.splice(o,1))):void(s[e]=[])},trigger:function(e,t){var n,r,o=i(this);if(n=o[e])for(var s=0;s<n.length;s++)(r=n[s])(t)}}},{}],10:[function(e,t,n){"use strict";var r=e("./promise")["default"],i=e("./utils").isFunction;n["default"]=function(e,t,n){return r.all(e,n).then(function(e){if(!i(t))throw new TypeError("You must pass a function as filter's second argument.");for(var o=e.length,s=new Array(o),u=0;o>u;u++)s[u]=t(e[u]);return r.all(s,n).then(function(t){for(var n=new Array(o),r=0,i=0;o>i;i++)t[i]===!0&&(n[r]=e[i],r++);return n.length=r,n})})}},{"./promise":16,"./utils":26}],11:[function(e,t,n){"use strict";function r(e){return{state:"fulfilled",value:e}}function i(e){return{state:"rejected",reason:e}}var o=e("./promise")["default"],s=e("./utils").isNonThenable,u=e("./utils").keysOf;n["default"]=function(e){return new o(function(t){function n(e){return function(t){c(e,r(t))}}function a(e){return function(t){c(e,i(t))}}function c(e,n){h[e]=n,0===--p&&t(h)}var l,f,h={},v=u(e),p=v.length;if(0===p)return void t(h);for(var d=0;d<v.length;d++)f=v[d],l=e[f],s(l)?c(f,r(l)):o.resolve(l).then(n(f),a(f))})}},{"./promise":16,"./utils":26}],12:[function(e,t,n){"use strict";var r=e("./promise")["default"],i=e("./utils").isNonThenable,o=e("./utils").keysOf;n["default"]=function(e){return new r(function(t,n){function s(e){return function(n){l[e]=n,0===--h&&t(l)}}function u(e){h=0,n(e)}var a,c,l={},f=o(e),h=f.length;if(0===h)return void t(l);for(var v=0;v<f.length;v++)c=f[v],a=e[c],i(a)?(l[c]=a,0===--h&&t(l)):r.resolve(a).then(s(c),u)})}},{"./promise":16,"./utils":26}],13:[function(e,t,n){"use strict";var r=e("./config").config,i=e("./utils").now;n["default"]=function(e,t,n){try{r.trigger(e,{guid:t._guidKey+t._id,eventName:e,detail:t._detail,childGuid:n&&t._guidKey+n._id,label:t._label,timeStamp:i(),stack:new Error(t._label).stack})}catch(o){setTimeout(function(){throw o},0)}}},{"./config":7,"./utils":26}],14:[function(e,t,n){"use strict";var r=e("./promise")["default"],i=(e("./utils").isArray,e("./utils").isFunction);n["default"]=function(e,t,n){return r.all(e,n).then(function(e){if(!i(t))throw new TypeError("You must pass a function as map's second argument.");for(var o=e.length,s=new Array(o),u=0;o>u;u++)s[u]=t(e[u]);return r.all(s,n)})}},{"./promise":16,"./utils":26}],15:[function(e,t,n){"use strict";var r=e("./promise")["default"],i=e("./utils").isArray;n["default"]=function(e,t){function n(){for(var n=arguments.length,i=new Array(n),u=0;n>u;u++)i[u]=arguments[u];var a;return o||s||!t?a=this:(console.warn('Deprecation: RSVP.denodeify() doesn\'t allow setting the "this" binding anymore. Use yourFunction.bind(yourThis) instead.'),a=t),r.all(i).then(function(n){function i(r,i){function u(){for(var e=arguments.length,n=new Array(e),u=0;e>u;u++)n[u]=arguments[u];var a=n[0],c=n[1];if(a)i(a);else if(o)r(n.slice(1));else if(s){var l,f,h={},v=n.slice(1);for(f=0;f<t.length;f++)l=t[f],h[l]=v[f];r(h)}else r(c)}n.push(u),e.apply(a,n)}return new r(i)})}var o=t===!0,s=i(t);return n.__proto__=e,n}},{"./promise":16,"./utils":26}],16:[function(e,t,n){"use strict";function r(){}function i(e,t){if(!g(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof i))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._id=L++,this._label=t,this._subscribers=[],d.instrument&&m("created",this),r!==e&&o(e,this)}function o(e,t){function n(e){l(t,e)}function r(e){h(t,e)}try{e(n,r)}catch(i){r(i)}}function s(e,t,n,r){var i=e._subscribers,o=i.length;i[o]=t,i[o+T]=n,i[o+O]=r}function u(e,t){var n,r,i=e._subscribers,o=e._detail;d.instrument&&m(t===T?"fulfilled":"rejected",e);for(var s=0;s<i.length;s+=3)n=i[s],r=i[s+t],a(t,n,r,o);e._subscribers=null}function a(e,t,n,r){var i,o,s,u,a=g(n);if(a)try{i=n(r),s=!0}catch(f){u=!0,o=f}else i=r,s=!0;c(t,i)||(a&&s?l(t,i):u?h(t,o):e===T?l(t,i):e===O&&h(t,i))}function c(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(_(t)&&(r=t.then,g(r)))return r.call(t,function(r){return n?!0:(n=!0,void(t!==r?l(e,r):f(e,r)))},function(t){return n?!0:(n=!0,void h(e,t))},"Settle: "+(e._label||" unknown promise")),!0}catch(i){return n?!0:(h(e,i),!0)}return!1}function l(e,t){e===t?f(e,t):c(e,t)||f(e,t)}function f(e,t){e._state===C&&(e._state=j,e._detail=t,d.async(v,e))}function h(e,t){e._state===C&&(e._state=j,e._detail=t,d.async(p,e))}function v(e){u(e,e._state=T)}function p(e){e._onerror&&e._onerror(e._detail),u(e,e._state=O)}var d=e("./config").config,m=(e("./events")["default"],e("./instrument")["default"]),_=e("./utils").objectOrFunction,g=e("./utils").isFunction,y=e("./utils").now,w=e("./promise/cast")["default"],b=e("./promise/all")["default"],E=e("./promise/race")["default"],S=e("./promise/resolve")["default"],k=e("./promise/reject")["default"],x="rsvp_"+y()+"-",L=0;n["default"]=i,i.cast=w,i.all=b,i.race=E,i.resolve=S,i.reject=k;var C=void 0,j=0,T=1,O=2;i.prototype={constructor:i,_id:void 0,_guidKey:x,_label:void 0,_state:void 0,_detail:void 0,_subscribers:void 0,_onerror:function(e){d.trigger("error",e)},then:function(e,t,n){var i=this;this._onerror=null;var o=new this.constructor(r,n);if(this._state){var u=arguments;d.async(function(){a(i._state,o,u[i._state-1],i._detail)})}else s(this,o,e,t);return d.instrument&&m("chained",i,o),o},"catch":function(e,t){return this.then(null,e,t)},"finally":function(e,t){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)}}},{"./config":7,"./events":9,"./instrument":13,"./promise/all":17,"./promise/cast":18,"./promise/race":19,"./promise/reject":20,"./promise/resolve":21,"./utils":26}],17:[function(e,t,n){"use strict";var r=e("../utils").isArray,i=e("../utils").isNonThenable;n["default"]=function(e,t){var n=this;return new n(function(t,o){function s(e){return function(n){l[e]=n,0===--c&&t(l)}}function u(e){c=0,o(e)}if(!r(e))throw new TypeError("You must pass an array to all.");var a,c=e.length,l=new Array(c);if(0===c)return void t(l);for(var f=0;f<e.length;f++)a=e[f],i(a)?(l[f]=a,0===--c&&t(l)):n.resolve(a).then(s(f),u)},t)}},{"../utils":26}],18:[function(e,t,n){"use strict";n["default"]=function(e,t){var n=this;return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)},t)}},{}],19:[function(e,t,n){"use strict";var r=e("../utils").isArray,i=(e("../utils").isFunction,e("../utils").isNonThenable);n["default"]=function(e,t){var n,o=this;return new o(function(t,s){function u(e){c&&(c=!1,t(e))}function a(e){c&&(c=!1,s(e))}if(!r(e))throw new TypeError("You must pass an array to race.");for(var c=!0,l=0;l<e.length;l++){if(n=e[l],i(n))return c=!1,void t(n);o.resolve(n).then(u,a)}},t)}},{"../utils":26}],20:[function(e,t,n){"use strict";n["default"]=function(e,t){var n=this;return new n(function(t,n){n(e)},t)}},{}],21:[function(e,t,n){"use strict";n["default"]=function(e,t){var n=this;return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)},t)}},{}],22:[function(e,t,n){"use strict";var r=e("./promise")["default"];n["default"]=function(e,t){return r.race(e,t)}},{"./promise":16}],23:[function(e,t,n){"use strict";var r=e("./promise")["default"];n["default"]=function(e,t){return r.reject(e,t)}},{"./promise":16}],24:[function(e,t,n){"use strict";var r=e("./promise")["default"];n["default"]=function(e,t){return r.resolve(e,t)}},{"./promise":16}],25:[function(e,t,n){"use strict";n["default"]=function(e){throw setTimeout(function(){throw e}),e}},{}],26:[function(e,t,n){"use strict";function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){return!r(e)}n.objectOrFunction=r,n.isFunction=i,n.isNonThenable=o;var s;s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var u=s;n.isArray=u;var a=Date.now||function(){return(new Date).getTime()};n.now=a;var c=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};n.keysOf=c},{}],27:[function(e,t){function n(){var e=this;r.call(this),this._homeView=new o,this._serverStorage=new i;var t=this._serverStorage.get();0===Object.keys(t).length?this._editServer():this._homeView.updateServers(t),this._homeView.hideSpinner(),this._homeView.on("serverAddClick",function(){e._editServer()}),this._homeView.on("serverEditClick",function(t){e._editServer(t)}),this._homeView.on("serverDeleteClick",function(t){e._serverStorage.delete(t),e._homeView.updateServers(e._serverStorage.get())})}var r=e("./page"),i=e("../server-storage"),o=e("../views/home"),s=e("../views/server-edit"),u=e("../xbmc-socket"),a=n.prototype=Object.create(r);a._editServer=function(e){var t=this,n=new s,r=this._pageView.createModal(n),i=this._serverStorage.get()[e];e&&n.populateForm({oldNickname:e,nickname:e,host:i.host,port:i.port}),n.on("formSubmit",function(e){var i;Promise.resolve().then(function(){if(t._serverStorage.get()[e.nickname]&&e.nickname!=e.oldNickname)throw Error("Server with that name already exists");return n.setStatus("Connecting…"),i=new u(e.host,e.port),window.xbmc=i,i.ready()}).then(function(){e.oldNickname&&t._serverStorage.delete(e.oldNickname),t._serverStorage.set(e.nickname,e.host,e.port),n.setStatus("Saved!"),t._homeView.updateServers(t._serverStorage.get()),r.close()}).catch(function(e){n.setStatus(e.message)})})},t.exports=n},{"../server-storage":31,"../views/home":34,"../views/server-edit":39,"../xbmc-socket":42,"./page":28}],28:[function(e,t){function n(){this._pageView=new r}{var r=e("../views/page.js");n.prototype}t.exports=n},{"../views/page.js":37}],29:[function(e,t){function n(){var e=window.location.hash.slice(1).split("/")[0],t=(new s).get()[e];o.call(this),e||(window.location.href="/"),this._remoteView=new a,this._mainMenuView=new c,this._remoteView.on("buttonClick",this._onRemoteButtonClick.bind(this)),this._mainMenuView.on("playUrlClick",this._onPlayUrlClick.bind(this)),this._setupXBMCConnection(t)}function r(e){return function(){function t(){return e.apply(n,r)}var n=this,r=arguments;return this._xbmc?t():this._xbmcReady.then(t)}}var i=e("rsvp").Promise,o=e("./page"),s=e("../server-storage"),u=e("../xbmc-socket"),a=e("../views/remote"),c=e("../views/main-menu"),l=e("../views/text-input"),f=n.prototype=Object.create(o);f._setupXBMCConnection=function(e){var t=this;this._xbmc=null,this._xbmcReady=i.resolve().then(function(){if(!e)throw Error("Server '"+serverId+"' not a stored server");return xbmc=new u(e.host,e.port),xbmc.ready()}).then(function(){t._xbmc=xbmc}).catch(function(e){throw console.error(e),e})},f._onRemoteButtonClick=r(function(e){this._xbmc[e]()}),f._playUrl=r(function(e){return this._xbmc.playerOpenUrl(e)}),f._onPlayUrlClick=function(){var e=this,t=new l("URL to play:",{type:"url"}),n=this._pageView.createModal(t);t.on("formSubmit",function(t){e._playUrl(t).then(function(){n.close()})})},t.exports=n},{"../server-storage":31,"../views/main-menu":35,"../views/remote":38,"../views/text-input":41,"../xbmc-socket":42,"./page":28,rsvp:3}],30:[function(e){window.xbmc={HomePage:e("./controllers/home-page"),TVPage:e("./controllers/tv-page")}},{"./controllers/home-page":27,"./controllers/tv-page":29}],31:[function(e,t){function n(){r.call(this,"servers")}var r=e("../simple-json-storage"),i=n.prototype=Object.create(r.prototype);i.set=function(e,t,n){this._obj[e]={host:t,port:Number(n)},this._save()},i.delete=function(e){delete this._obj[e],this._save()},t.exports=n},{"../simple-json-storage":32}],32:[function(e,t){function n(e){this._name=e,this._obj=JSON.parse(localStorage.getItem(e)||"{}")}var r=n.prototype;r.get=function(){return this._obj},r.set=function(e){this._obj=e,this._save()},r.clear=function(){this._obj={},this._save()},r._save=function(){localStorage.setItem(this._name,JSON.stringify(this._obj))},t.exports=n},{}],33:[function(e,t,n){function r(e){return Array.prototype.slice.call(e)}function i(e,t){do{if(u.call(e,t))return e;e=e.parentNode}while(e instanceof Element);return null}function o(e,t){return function(n){var r=i(n.target,e);r&&(n.delegateTarget=r,t.call(r,n))}}function s(e,t){var n=Object.create(t);for(var r in e)e.hasOwnProperty[r]&&(n[r]=e[r]);return n}var u=(e("rsvp").Promise,Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);n.toArray=r,n.getDelegateEl=i,n.delegateListener=o,n.defaults=s},{rsvp:3}],34:[function(e,t){function n(){var e=this;r.call(this),this.el=document.querySelector(".home-root"),this._spinnerView=new i(this.el.querySelector(".spinner-root")),this._menuList=this.el.querySelector(".menu-list"),this.el.querySelector(".add-server").addEventListener("click",function(t){e.emit("serverAddClick"),t.preventDefault()})}var r=e("events").EventEmitter,i=e("./spinner"),o=e("../utils").toArray,s=n.prototype=Object.create(r.prototype);s.hideSpinner=function(){this._spinnerView.el.parentNode.removeChild(this._spinnerView.el)},s.updateServers=function(e){var t,n,r;this.clearServers();for(var i in e)t=document.createElement("li"),t.className="item",n=document.createElement("a"),n.href="/tv/#"+i,n.textContent=i,t.appendChild(n),t.appendChild(document.createTextNode(" ")),r=document.createElement("button"),r.textContent="Edit",r.dataset.id=i,r.addEventListener("click",this._onServerEditClick.bind(this)),t.appendChild(r),t.appendChild(document.createTextNode(" ")),r=document.createElement("button"),r.textContent="Delete",r.dataset.id=i,r.addEventListener("click",this._onServerDeleteClick.bind(this)),t.appendChild(r),this._menuList.appendChild(t)},s.clearServers=function(){var e=this;o(this._menuList.querySelectorAll(":scope > li")).slice(1).forEach(function(t){e._menuList.removeChild(t)})},s._onServerEditClick=function(e){var t=e.currentTarget.dataset.id;this.emit("serverEditClick",t)},s._onServerDeleteClick=function(e){var t=e.currentTarget.dataset.id;this.emit("serverDeleteClick",t)},t.exports=n},{"../utils":33,"./spinner":40,events:1}],35:[function(e,t){function n(){r.call(this),this.el=document.querySelector(".main-menu-root"),this.el.addEventListener("click",i("button",this._onButtonClick.bind(this)))}var r=e("events").EventEmitter,i=(e("./spinner"),e("../utils").toArray,e("../utils").delegateListener),o=n.prototype=Object.create(r.prototype);o._onButtonClick=function(e){var t=e.delegateTarget.dataset.action;t&&this.emit(t+"Click"),e.preventDefault()},t.exports=n},{"../utils":33,"./spinner":40,events:1}],36:[function(e,t){function n(){var e=this;r.call(this),this.el=document.querySelector(".modal-root.template").cloneNode(!0),this.el.classList.remove("template"),this.body=this.el.querySelector(".modal-body"),this.isOpen=!1,this.el.querySelector(".close").addEventListener("click",function(t){e.close(),t.preventDefault()})}var r=e("events").EventEmitter,i=n.prototype=Object.create(r.prototype);i.open=function(){this.isOpen||(this.el.classList.add("open"),this.isOpen=!0)},i.close=function(){function e(n){n.target==this&&(this.removeEventListener("transitionend",e),this.classList.contains("open")||t.emit("closed"))}if(this.isOpen){var t=this;this.el.addEventListener("transitionend",e),this.el.classList.remove("open"),this.isOpen=!1}},t.exports=n},{events:1}],37:[function(e,t){function n(){this.el=document.querySelector(".page")}var r=e("./modal"),i=n.prototype;i.createModal=function(e){var t=this,n=new r;return n.body.appendChild(e.el),this.el.appendChild(n.el),n.el.offsetWidth,n.open(),n.once("closed",function(){t.el.removeChild(n.el)}),n},t.exports=n},{"./modal":36}],38:[function(e,t){function n(){var e=this;r.call(this),this.el=document.querySelector(".remote-root"),this.el.addEventListener("click",i("button",function(){e.emit("buttonClick",this.dataset.method)}))}{var r=e("events").EventEmitter,i=(e("./spinner"),e("../utils").toArray,e("../utils").delegateListener);n.prototype=Object.create(r.prototype)}t.exports=n},{"../utils":33,"./spinner":40,events:1}],39:[function(e,t){function n(){r.call(this),this.el=document.querySelector(".server-edit-root.template").cloneNode(!0),this.el.classList.remove("template"),this._formEl=this.el.querySelector(".server-form"),this._statusEl=this.el.querySelector(".status"),this._formEl.addEventListener("submit",this._onFormSubmit.bind(this))}var r=e("events").EventEmitter,i=["oldNickname","nickname","host","port"],o=n.prototype=Object.create(r.prototype);o.setStatus=function(e){this._statusEl.textContent=e},o.populateForm=function(e){var t=this;i.forEach(function(n){t._formEl[n].value=e[n]})},o._onFormSubmit=function(e){var t={};i.forEach(function(n){t[n]=e.currentTarget[n].value}),this.emit("formSubmit",t),e.preventDefault()},t.exports=n},{events:1}],40:[function(e,t){function n(e){r.call(this),e instanceof String&&(e=document.querySelector(e)),e?this.el=e:(this.el=document.querySelector(".spinner-root.template").cloneNode(!0),this.el.classList.remove("template"))}{var r=e("events").EventEmitter;n.prototype=Object.create(r.prototype)}t.exports=n},{events:1}],41:[function(e,t){function n(e,t){t=i(t,{value:"",type:"text",placeholder:"",required:!0,autofocus:!0}),r.call(this),this.el=document.querySelector(".text-input-root.template").cloneNode(!0),this.el.classList.remove("template"),this._formEl=this.el.querySelector("form"),this.el.querySelector(".label-text").textContent=e,this.input=this._formEl.text,this._formEl.text.type=t.type,this._formEl.text.value=t.value,this._formEl.text.placeholder=t.placeholder,this._formEl.text.required=t.required,this._formEl.text.autofocus=t.autofocus,this._formEl.addEventListener("submit",this._onFormSubmit.bind(this))}var r=e("events").EventEmitter,i=e("../utils").defaults,o=n.prototype=Object.create(r.prototype);o._onFormSubmit=function(e){this.emit("formSubmit",this._formEl.text.value),e.preventDefault()},t.exports=n},{"../utils":33,events:1}],42:[function(e,t){function n(e,t){var n=this,i=3e3;n._pending={},n._socket=new WebSocket("ws://"+e+":"+t+"/jsonrpc"),n._ready=r.race([new r(function(e,t){setTimeout(function(){t(Error("Connection failure (timeout)"))},i)}),new r(function(e,t){n._socket.onopen=e,n._socket.onerror=function(){t(Error("Connection failure"))}})]).then(function(){return n.jsonrpcVersion()}).then(function(e){if(e.version.major<6)throw Error("Only XBMC 12 (Frodo) & onwards supported")}),n._socket.onmessage=this._socketListener.bind(this)}var r=e("rsvp").Promise,i=n.prototype;i._socket=null,i._pending=null,i._ready=null,i._apiCall=function(e,t){for(var n=this,i=0;i in n._pending;)i++;return new r(function(r,o){var s={jsonrpc:"2.0",method:e,id:i};t&&(s.params=t),n._pending[i]=[r,o],n._socket.send(JSON.stringify(s))})},i._socketListener=function(e){var t;try{t=JSON.parse(e.data)}catch(n){return void console.error("XBMCSocket: couldn't parse message",n,e.data)}if(!("id"in t))return void console.log(t);var r=this._pending[t.id];return delete this._pending[t.id],r?void(t.result?r[0](t.result):r[1](Error(t.error))):void console.error("XBMCSocket: couldn't find pending message",t)},i.ready=function(){return this._ready},i.playerOpenUrl=function(e){return this._apiCall("Player.Open",{item:{file:e}})},["Input.Up","Input.Down","Input.Left","Input.Right","Input.Back","Input.ContextMenu","Input.Select","Input.Info","Input.ShowOSD","JSONRPC.Version"].forEach(function(e){var t=e.replace(/(?:^|\.)[A-Z]+/g,function(e,t){return 0===t?e.toLowerCase():e.slice(1)});i[t]=function(){return this._apiCall(e)}}),t.exports=n},{rsvp:3}]},{},[30]);